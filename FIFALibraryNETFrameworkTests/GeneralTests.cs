using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using FifaLibrary;
using FrostySdk;
using FrostySdk.Managers;
using System.Globalization;
using System.IO;
using FrostySdk.IO;
using v2k4FIFASDKGenerator;
using FrostySdk.Interfaces;
using System.Diagnostics;
using System.Threading;
using System.CodeDom.Compiler;
using v2k4FIFAModding.Frosty;
using System.Linq;
using v2k4FIFAModdingCL;
using Newtonsoft.Json;
using System.Collections.Generic;
using FrostySdk.Resources;
using Frostbite.Textures;

namespace FIFALibraryNETFrameworkTests
{
    [TestClass]
    public class GeneralTests : ILogger
    {
        [TestMethod]
        public void TestMethod1()

        {
            var careerFile = new CareerFile(@"C:\Users\paula\Documents\FIFA 20\settings\Career20190930235655", @"C:\Program Files (x86)\RDBM 20\RDBM20\Templates\FIFA 20\fifa_ng_db-meta.XML");

            if (careerFile != null)
            {

            }
        }

        [TestMethod]
        public void LoadFrostyGameplayProject()
        {
            var FileSystem = new FrostySdk.FileSystem(@"E:\Origin Games\FIFA 20");
            var ResourceManager = new ResourceManager(FileSystem);
            var AssetManager = new AssetManager(FileSystem, ResourceManager);
            var FrostyProject = new FrostyProject(AssetManager, FileSystem);
            FrostyProject.Load(@"J:\Work\Modding\FIFA Modding\Gameplay mod\Version TC 2 Alpha 10\paulv2k4 FIFA 20 Gameplay Mod - TC 2 Alpha 10.fbproject");
            if (FrostyProject != null)
            {

            }
        }

        [TestMethod]
        public void TestEncryptionKey()
        {
            ProfilesLibrary.Initialize("FIFA18");

            string textOfKey = "0B0E04030409080C010708010E0B0B02B0575236773A81C940291A3F811CCE92E6F01B6B7241EA23E7D4293F7952499E1C9EF2B2319B2D3B6A5B4EE94488FF969CDD9FE1CA005DE0512C6154301F1CC4B164C3F1BABBCE0E21154AED9B9D7832DD92E1CE228D9B0F33E9C4907F2B9E3BBC5AE5DA6855D7C4881B7858CEA10A89A819B1C974BA0C64D087B6449AF8735F9BC0623988238492F17666A6FCC67338421C1252A809BF7B371691D7375DB659515BE144C397039747AE4C343B2E45FD796AD2E9E352C405F41B58DC54D1FF5B7D0D544766967624CED764B41C56D8D7861119DBE528B0C94123A9C6069587E445DFF535811C19490EB34D9997C8370D221CE52F3A36D9384606297D82D846CC85131D1A9044F5FBCBDD3990E37D7DDEAA5171AB88E7F8B477C0DDF42B7896C193B72A37B92268B110080B0A963BED4D1D54E1B48979C1C8C288ED78A8073295322DA4E733C33B633154C285AFF19C19820B9FAC4AEC740B4855CD7E98AD0B90376C6B32695585E711F1C9E08F29D733158D7D696CE639EF603C4093021E8C56317CE2101E2F3CAA340CE6E619709821120BC1F5D087179D6BDB9F9121AFFC927C2AF1FDD50CD0F63D564FF094E9FFB0C6F333BEA5D34A556EE0640F729F3188E6EB76FDC11CFF52D47D2FD5A72E33B6209490E2D9A41A0C58106D993DBDC3763A7F7564B472F4CC6F3DAAA82F2A962851AC87AF3E1273A71B90255F8C52869D40AFBB81612343BD569C8B9AFD7BE2B25889F29B3BD9216E69FFE9B8E63016C67E2A27F4D029B57006C4E7100135D6EFBE964CA6C65B19410A20B22570037F063D5B10B70810B4EB3413168477E20544BB95482D15A0405D030AF775A38414F27B8AA5E0BAFC197FF231D07618C30D0298BB53E910718796CCC4FB60AFD063B40412AC2967203138931C0EDA4BB0E5DD37B0F9DA98B483B3F0EB39725D0ACB5301B732537DD1023BBD5CFE8C46DE7E919C5504E404197BAAC626020B6D667041D36BCC1393D65B9F0B2CF87443E4F4B25320E4EE20FD2E49DA866103A5C52C641C9BFB8A821741FF3551C2416F347C462326D51F4DBE6482AA52EE781B79849DACE984A5223AFF087252A789ECB49590CF9E717C31DC83368E2828085B66E3101BBCC0634955A4807265D70340D31F1291610AD6F6F13C2971F8AB3AE3FBC918563B4C0464161E23C20C5880A66F5757B4506016CEF5D614B7E0A1954EE836ED1FAB124D3A001C2E9CBEADAC6FCDA68A254517670002542B423B8CF2451EE364CE44A06376FA0F8066DC9BA22C65C00C19A149E168EA7EFBBD614B8E3BC612F3256D0FD51161D00E96CC62B551C6D0CC4575C5E78EC1B36A6CC2288166550381FDD4CB90933DDFB0FE6A9CD526281427E770E4E5490448B3D1210307B380946BAF93F5C3C590B31BA2A1B789418EED39942CFFCBF29E6C7D03EABFA6F5371097BCB7F58C52E100F38C4970962CFF32501FB641660CD624891A290868BCE0853EFEEA0D0688EAFAD4218924DB06774F850134A60A7CE10198A63793D4FD273F0051A5D67BB7C031C82B574A1C252A93EC3EBDF8EC066F7322ADDF53B610D7C7D62057A128FB8C233263029B992141B7149190CDD98DCD14FACC43130E0ACDB4EE1595DF6F2102B66DB0FCBD370218A4BCFB8DD1ED31F5B9CC56866270A85B33A2319D677CF7B2367C8CFBBA144E543B93996AB6A5B20B31623F0D16608C72BFEFCF26CED2175721B98084A4AD96882BF53A0EDB2C3551A1D58C9B9ED14950D5B16CB9F63372F54F1F6FBBF0E0B896AE4DE000B589DA6BF7D9C339233EC05859FF24CEE88E38B97F2599644561D59102F2175C2E82623EDF2576DAF5228A69DE72F17CC00144745A9EE4689910CAC6524C7DC0693526CA60FB36BF04142F2C6AE4C201A08E30429EC5A2C48EE3AADD25D1E6EE1E3218F0287C8960292B2B16F4C86DEF76F51BF0D37D2FD209556DAB8C6B0FB1451442C574B81E0B891955EBEBED87B679E74B5E9D5487BD26AE8FB869D4959413BBC6EEBED10EBA83BFCFF10A038925CA3AC6DD864395A8E2D359BBC7491395B4004A0418189A097820E18D7C49271A6A335199A214A790A228C87BA236E374CC968064DA48C9ADDB7E49448EF2B9793CC621BD40D82432AB1AD1D0C3EB9F71151A2F39FA39888606B2EF2DCC86BB320AF8FD430CE97A58EFB4F0F890841CBF6C80BC33EC9843BB60B54FE5430CA3F02A0B65FB4E83262E5A8BF698EDD1AF601151BDDD838376B4A8CF76F813CFA440AB94EE4D852222CBCF22A96108C1A4C93C6EEC34793256FDB8DE6320A69060DFB2BC8C6C213C0C745D8F18E90974E335F3F952A0415683FDA4731FF9A67295FCD622DE14ADAC26E62AB9E202C377CFFB74625CB70737017A163215066A5D653C040647CA25B293FB885F9A8FB7B8A3243F19BB17E91B389D37D03C73A0FFE0FC3401CE4192B9CD076B97417704D40258A78588A2FAE5CB63A1FB8E45BBA722FE20ABCA6885B439CAF682A0367FF25313ACCE6B0169397991928C6A23372F47046DB62A93ED565BEB14ECBB55F90DD21D3354E8077DE8D11DFCBC2993BE23164A628BBBE1ACE80E3EFFB9CEF3B382AB3AE1D43AFD1062857D04897F38FDACB82694D922627E457F7FA10A4CE1F009DC6E1080292D379D43B602E65F30AF597D5BBC33DF4D8975D53D4615C206DCB0274CD60E37F4B18AE09DFCEBA05EF8398C609B56600C2BA2F6CDADC8A7D7E23E1ED2745769CEA0213D5621BE05D302F63E8A5CE4AC45BD6AB7290F73E1EB9B855CAA19B717B0F7FCABCF940A867A3F07ECE925DB9282182C7573C6ABFDEF6B0F3EBC00C33CBE9A08DEF084F9627CF7B16F66D78FA58F64FC20169DB4FA7A95D00471E426355C1D47FDDA9713B3F922E444B401FB656094AD2E3132E96C49D2530E6E647D65A87895FB2596C107BBF929CED115DB73B6ABF71464E43836316920EEAFA0CB4A9BEC02391378379D6B569E8889B972F2122C0B910DCBA7927EBC571AA8EB682D061770C68D70A61E2EDEAAFAD0325FC9A604C065740F89E83D03A403812784FD06FC4194D07226D620EFC38FB127EC1F93BEEB4B8EEB9E78E70027C6532115639C44A0EF43DFBFC3A4D9B5F413FD889D8D0989227DFE1E4E337F3F38A94338D264E97E900A816092D10EB58DC7C238D6693B8A90E0785404A29FF42CBD8BA1D17B3ABA844BADB140CEBB08E2779808A2088EBB5C29DB70EA4F16BE91B7A5A817CA207B7F3C35C0EE040E71BEBF48FB8FB8872A82176D8D0D8FC826214ADFEB391A5BB3A1D65D97F6227FD302720E484673B9AA67FD8466BFA4F9436BDB254D2BBB375E9495039E7632B6DE8023BE31BEDD63661912AF4F6734093A6535A294F103C056089D121395E38D7B31C35236E8D34FC2C4D8A6B4983B7189BD9D1E112CD9040718882DBC8F62C2309D4810D9F85606D81755C0126133D85192E9D6B5828C7CDAB4E21128AF1B904C53695E5126D5B02642427CB99AEE756FDD7C954C5B44BEFA108628C2EF034990EAB95CA854D884CF345CBBFE844465E260AB8ABA469A9FCA6A5BC11A20B634799B3F576E1233E79ED7F13D965D9A22185C1C380A03A0EFB3AEC78EED3AB93C04A4255EA1384B449FE04900D154480E018B158209E6BC7C1D25EDD274ED94BDDBC9EA1BCB61BB6DF97A422C039B0DD733D94E8B25CA7278EAEBDE7D27D30C37165C3B335C51489BB48405FC07C75FB50411BAF9809AC84743543BBAB831105703857EC8E94CA6D692C35969C0BE9AF4DEAE9483E1611C816E7C06A5A09E53241A0F09B8213DC81AD0F4997F00FF1C79D5B6C8C58CF4063379E804C1B3FEE4E8B0BB53D6FD97E4EB960AFD45A84FC536D037162B672B26FA19C44A346E7D3F9098D9ACE25EB8D53723557EBD81FECCFF744BB981F29156164F757D197604DD196E4F6AC1C7520A02013B810DB958B4FEC1F41584BCC27EE79471D15041EF2E5D811D8DEAF47293D5280F050F6D914ECAFE871BF8C5BDA09872D1700E8EEE7C84701C1726B3D750A29DA4FC8BE77077A43654497FD7D44803B8F6BC12FDC659D30A9C8991E2A726219C25F7178365CF80EF9D2319A96F6A30FA9016972D9929328762B9DF59540BA5B8DB67BBADCECB327191A32F048152BD43C6FFC805E50A949C997B7C53C7388C990E844F31B33716D9100C6E695BE2DFA555912F8375DADD05453477C7AAC9BD1D0432F0C6583F361E2F2D2129F1E01D82F011DD6C422AEFAA12F1844634C2F8C232995B0C6F9B292408D9EE105FD7E7CC76279AE18876C8EF2DCC60492C03FB791EDABAA23DB652B3FFABF322D308EAC270D9A140001540BABD715F2BF0858509519C5C1DDCAD2687366365580A4E1CD67D4CC35BC3A6A408C7A7F41C9BA2C81625701AC84057189B654E4DCF007A7D4BFB427202F57BB49F5D4AD51ED229EC0C999DB351C63CB7AF8AAAF75BF4AC8E13EE47DAF3A79162C48B96F3E709FBA56FE790B68A1094675A57EF618E4EFD1E2DF713659B6800F0898CD03F21127F6EF424F10649698F99BE10326416FFA65FE4A58EB4A4848BBB0A5E0F49A028BBCCDC6A106E897770CBB358D0971F781EBAE6855DB4351B4D79DA2E435E33DE8C29F2972E12A511FE11883B7B255CAC429B8E86E7552C6C352EEBDF6DD2BB83342C66D0A118A10B54A2F68F633567CE4F710BD49FB670613ACF07088F2E51DC7409C57021E1B1E619EFF5F75B8239930CB3DA1C490721D202F40698AE14A2FB79C08F9952130EB48BCECB767416D9AB4500B86A44994ED40BC07FCB2DD09E628024B08F2B64B042787D5AD227BF667F43E8085123BA5B7153A28664F556A5430FFA4BFEC56BC5AE45E0A1F38C00F4250B8753D23A938DC6C58B42CF50B153118700C3BE4E1BB041B087C2DA59D0D6E517A09418BCEA47E132908611A92BDDE75579B60B45FC6C1B56C2A84FBF56A0E802C49F6DB5FBE60B32B9255F9DB01CC2C16CE2B11B91CA616E2DE093B162C1195BF07B5456417502D628B32ECE3AFD632FA15421246E9F8D6D0BD5976E95DD2C1F70F4725EEC668FD6D4962C9D04C342E76EB313E33CA01B57D431516DC10CB5BB830CDD74C8A8FF40450069ACE5362C2E2631379C0264C48C7EACCF1DA08DE0F632F7733198D9F124EEE74D97AFC2AB4E636A88972811A16A10FA4B47B166FFC743F9AD43A2DF538DBE2836EDC9DFCDD344C6FCF6976BB253D7A421722484F29F402D0CF32E0257A688AA6A2959D88B5C4D6AAC35C6F8049EE32EE65E46A11D6BE2E59B8519E878343FC849F994E6150EBC10EC4247D72CEC86B20A109B7E53F6DD56007366C0B5D33AE8B064456D9397D4B05A743F4BEBF30B272EEAE2DBFB7028B87997CC1F4C4D0E28FB05F187F0803FEC15F2005F7ADDBA5FB4F70269F7728AF7222ADA4584AFB95CC6C9719D62B8C347C77A6FF52D68DDBD12FA40CDB669034EA40A179DED136037AAAFAD6EF1DBB7CE4D9C43E7CB5AE9EB19EA0AF5EBD9D442A0944FBC74108D43BF4163506CF936019758DD3C9AAFF7135C372BF9AE0347EB915CF6EED7A3B974D8B6FEA46AA2F9961249648A5028A32E2AC4DCEEBD64A6E5C42733DB52A84137232BB2CFD92740FBC9FAFE35B70BE24450F2DA3F9B8F011681C08F746264A489D32FAFC2975DAA2C9BBE938CE9010BB961E099F8D706A7BB57F382C8819CDB11A6E647835AF1B861E03A26CCD7C57B606134D58FA319A8169EE7C0A3336A14DE4A2B88805399A0C6135A62DB234690E708D0A3FC861BB4C2F4F8836D59930836BE7F1811200DD57DED9B028B249D050A1D97B307B5222C09FC1BAFBA5C2B0FB0F382D4D97ED906EBEDAF02FF35E2A005A9C85E838095A2AF4015309B0B2BBF840315273087FA41D3D5B5612C370B2D7471CC9437F8DCDF2DE51D9373F7BB4B401FC4B1ADFB13C679CA608DCEAA30CBD6DC481EE4E13ACDA8ABFA5F0B6955150D7972AC5251BFC087CD2247238D6B72797B33F1BF6F10D8A0547AAF3C7CE6765405149E973A23A260D27D5B32D0A2728E994DC68340512727E3B8CC5F3B330F577FDC8959457FBC3CC9B93805F2EB9599F4A160732A54174628A5FF97D5971E100876E40D3E61ADE26BE6E909EB802B5A3A33E2D0810EEA718212839A1AE0F73B92FD6CC728B0D37970BCCC55A19CEE71F4B43760647E929A4F87E01539290997B1DFF6D08BAA87E91421E20039CEA4F6D51BD9C0DC21834812CBDF2F5389BD0799C525EBD53BCB9D3C739D4B3D55E67888A5EA9915242BEF69D129448466933D168A6261203AE87AEA329FDEC2CCC48B4712C8260C104A1CACC1844CC29AA1454E7B300D1457EB7F8B4F7309A0C1AC82A3DE47ACFD59F73947B266828BC573BD3FFC611C6FE78744F07082C8A292E2B1847BEB28C06706568905D5C264BD0292ED0E0607E8CB230A7546DB51E4CD94B9C9D11C9B49FF51B702F97805B20ED31C2673B3297C8F877E358CF54DDA77CC39A018E694BAAB5A53B3BC309C072B85091F45DA56137F9EA26AD2CF5E52797952C9042957633F039890DF0484431DA452D16DF87642F1CC10460D0944DB2666739674F09BCCFC45EF6B16DE184CEF0CAD8763560053720D240680B15239F452AD526BD04176F70CE89D5C40AFE0ABBDAEB3DDFDB4921A911466073B90CFADD482CDF06D2ACBE1CE6FF3AA7AD1CB8ECF7FE637248935D0665180E1CE79C0D8F4441C421E5425E3453D7893A9C91313D92B9CDA4C1B344F2529076D88D7C882C084DC710ECB31E8A95CCBE8A0A01FF71E696882F67FEBB106F0E46F1849E48BD1410435315EF4152BD61BC56CB94795917B4F018039505EF7A4C72B3368D32450E9C34BD6A86C67BAE2D2D1B8FCA754D0DF27A5ABC6F4DD999A65F9818035D74790EB37AC396DE1AE6C98CF6795FAF17BC4140AA7906334547E75944823616818B7818DF51162F32719EFEB418FC0596427013F549A96B31B9C3405CD62BE55C7392E4FAF9B8F8F218790D4248D7CD1E6E693B91386A22D7B515233DAC0479A8D45D1D9806EA46CE5501682861BB76E4455051532B0F2F94E5D0ED566D64ED5E3CC52EEC84C4EFA281AF6496304DBD564972E13FDAEB9B58836FA924E53140B42E2A2A8D827CD4EA46800E17FB75115E590513B847CD23C6E4752D73C677C2997BBD3AB2400CF4C4E972722EFD85CC6D5454D342D8AF8D2A2967EC5128ED17A4817E14D1CC7B683D1C88C81F19A63D7B8D4C11832AC51A3536C387BA75745AAE49E8E1E6D348C6462BD9EA5816E432C409970BCE163D71E4C16120920CDA273119E79A1BFECB210FD02870CF9062AB685DE188093DF64C9749596A4A647FD86CA63218BD25B209A7038821B1EC161AF62179BF03A67DE30436A178C04A14D6746D5E721DB5ECD98DB92DD64AA655042EB815BE52D9E01B95E03BA4FEF23B96A8A130F8C97A66888D676429088A214275D4F2CFDD12BB73C9FC531025A1D3B6BFA811A9FD3B352C04A880E17997CD69D229CE56B8A6D3B119B1306E7105DFE6E1C781E8C5E7164AB9C4F5382AD83BB2A9574502B5A57CD6635495D4C7F0EAEBE334E5700084298BCFC52AB0BDFAA11DB232A702EB8AACB084AC229AD4305BF301330E6D0CD3837A1C779DDFE55A07347B1E7A1A639446B50526DC07AB755DAFFC5CC6F7B66AB5BA9177C31832822E3809575E9A08F47C6B2F0266867FC4BF344D38CA734A0CF6337003452180E208526D5F861BD0EA6583A201FA5D29983009728CC741C24D285F27F8686F8B5BEAB0D03AB63DEBF6B177998EF18763CC4124E06EA34B722D8A97CF6C7AE7D8F2FC5A2E31C48D092D8EC9235B55F1E52D8199FD25DFE97B4C164517B2878C510B6553B6D88EDBE5B888BFAE419268D08550C170A88958A7F8B94C44656288C504797237F205C8CD4E54A5434E38251A2337782BA9F78D7B6D02288427E06AE19CEC8A256DA77665CDCA433E5D0374BCF8D46FF4630B8F22551DEC0D1DC110FC5EB8E28B478FC342FADB944E406EA5910C88095532369F3495D4F6F2CD572E5DD0E2979F05A2A747E8E6802FBEBAB8E1FB5922B91138CF7DB438C121AE835400801C4B13EE910611888F45A192486AB3122BEA329AE20E72F79A67D2534AB804AF085A9F3310A44DEC93B528D7CD5FC7C3D1F077E0F99656812ACE3961431D26089CE146A220BC94489BA9A08D9935053E965A3D84CA6431C4FC1B8E23267C764C6D6C78FB7DC15DE2999ABE207DC78FCD15B19D4E875F86F4129EB6DADEFAD36BFFBA7D772F9FB42F4660324371B27057F6A509233E7E77BE43591FB47F760E53070D832B506DFBF2DD95427B7AAD1915C488F67145B326A8593DDEB8A64C1ACAFEB3B509E3C9F615AC232CA5660DFD878C181D8BCA911C5E921A664A4B1F16E8C8DAEF493233B503C5AA452DC7E0FFD876858BFF588700B1CEE0F21EEB12DA8D12E86CA5B1C0FCD9C1B32C74772CD254710D02F68C2BA35992B5CDD0F1BABD80A583DCF9749B7BD6D96108834C10E52BF1BA1847C8536A7468A18892A88C9C4878381164D1FD7B47A0DE91FA717D72207B66AACF23825BEF77C38AE05CEFB1EA8A21F00FDC9621FAFFF99EA68F6BBE20646B2195FF9C3DA2198281226653448BB9D2E6B68F84A92A32736AC6FEA7DAF8269BA7915B6D7676D2EAFF4B39A0675601B69DCC61935EDE95957EEBBED331C81D4AB3101FF2D1F94B5C291EBB9966B3369D6C0ED42EF796E26D21C2A18C9D8BFA2FB581847E91BD277D716D9F6BB92DEE4EA9ABBBB2B895B4AA2F962E146CEBBFF7F6793570DCC83E716CB12E505CE059E8B8A434EB6D4502E3675A2CD2F374632A1132668C23151C2D4D709D37B3CAFD1F742A096B0107CC1417A279DB2F04FE334431879E6815DEA20593C0CA83AA1DB3FEC9912CA7AC8C0E729CAED7A8D2420AAC09675F625F32A489ACEAD26DAAE73753EBD95B239D1C9EC365B6D032448E984492C9CDCC49D333A4E250F8219D66B7ECB4DAE8C5FFAA4135DC69A6F9A2916867728E641DABE52128CF743AB0C6C6F76488F3856AAAC1274479AD7988A9B80309B2FF8D46728B4AF9C333680100B7035EE3C950EB8AA2833A4BC55304A236F01229D86486569215ED5EB3C12863AFCEF089DD16562294F9D50AA459DE12950CCECE7FFB4CF96816742F3E0601B30332C45C8CC67D6B628D5878B334CEC64125E41BB680CE7FA93CE1044048CB170AE8D2784E1DCF282D1C5B08B5DB843EED708EA04E261ADF8B9622BBB220B33EBF2FAD10E02393D8621B699929078F2120D4DFCB127D8904135B1D89E3D3C3A2A932898AAE9109759D1B03119174B778EC37356C352764D802193AAA820EFFE8BF7652BDCB3DBB4FD12878307631777BD4A51BC14863D9FD5D62339C520E5E66CF23DE24C014FDE43735407F1AD0D982A1FF3B34FE6E12E9AC7DC4C3E4C186646501F22E878513E6923C6A0A05A77EF59DA7A0967D739EBB38FA6985452F2A921E14EB7B438272EDC2D56A0158611361EBD16AC0ED5527F0361412DD94A1F96366F713A63ED7E0F950F93E1B19C09577C994D34738A962E28884330E5665094100AA16560AB1DDDD27E44E4F2C992792AF8F0DBD6601530909A711149F815095B225976BE0F160253AF627E773C0068F86D8B3AB2D6C13D158EEA687AA7EFA8ED97109A3482DCB01C1989DFF1BB39C68DE7C39B293723C358F85C8A153D2D422D916F369B627F3F3B134478DC8C562BDF202C8B01161AE8D39E1CD1A8E6A1E13D41EC9D68A7C42271BB140A4167C99D66792BA0072F340500F38B09DF1DB89DD479683620ECE1623787D1FBF3C3FCB77D97DA97BE06303AC1D729053EC8F19362EE813B3439B8317F33D22F73F50AE754E1E7F64A8BCBE808A79C34C4096DEACA16D2CB9774AAC4F5354042381692E6026E7F42852D11E3D02C598C6EEAAD91547F225604382A422712870056C377C0EF6803956EFBAA2A9D49252A748AEB70B45B48AF03F48E8AE885441E6B37F3996341F95D9BBB8EA133F00FEB7739F18739588148E8DCE102346805F129172547092ECE548FCA0D0D635BC323E93DAB756334B88DBC0F66156066BB22E5C4D4A268E2C4513488F108242AF51E44D87BE459D141B514B7E831F936C4B24F9243C425B398B2F3AFF93AA52B667A18412A0806F12655D46A5B07665F7A1D3634C61B4D8FD148DBE7CA286C09F95CA8D039065C896EA7E76DF4EC4847DCBB91AFDD2A86A7F5B107621F21AB80F666406A56164407DE240D9955E8EEF52C715D90DC38E13BCDF7DDC44E27EBA9B65A4A9605F85E3B22F1460321BF6A55331596828ED4474D539995A99EF86C5138B8EEE92544F584D4B1A38DC0D404409E9B947BE5AE534C8B8D0F4B5F72BF8CA3A35A15EEB2E86475E7F97B7EAB688665A282F6AF423B54E7F5A775E370A7CE12AC06DB1476E12BAD66317C4070BBFEED7689B14DA505FB9843F8B75FC20CEF7B9624884A34C63114B5F7A959DAF205715398F71D081C0D536C96C2AB77250E9405BB80C2D20E94487AEDDD3088E7EE3A8E52CFC7D654E6DE36D029B330B48F770B4838E28E3C8A5AEEF0FD12C6A964C5E858C356EA787903A831195487EB13F8005D58F0E5EFADFF57689DD8ED896C725C51FC7BF2058C31F1BF2184DA861F3611229146C01605B39C0413EE447109E7F1EFFB87D74F19221EA8CEA90FB6063B7CCB996DD71C5B57612335BAE54E1E4E4EBF7BFCF20932FF96E3AE125CC65FB179C21988000CF99F3751CB64DC80D5327EE92E489C738A17C8D0F33A5B75819956844E22A5D91022A1AF1AA4500080AB168ED2235A68CDDA2FD6255AF3853A79BCB22FF1C9421205CA1988B109FDF9AB8D8C724B0C22E1904353494F007379479E6F693BB3BB060E311243CD150900E9B56205FC56142CF6E17C02B9885AD93C6C8FBF364745AA6F58D01D22F5F4BC29D30BCE2F08B821D892721FEF9DB6459831209347BA6DAAA7D7153FE3AF4EE67D1BE5638C0154A86CF5B2F8721B535D1A409B59A7FDE1A7DA5E8B98CCC1A77C825BD7E6384072FC289C4CEE22495DCE449D5083443AAAE13D8EA078080F475122EC1A30E3F0D5E7E013D1FAE5A97ECBBA47C41C4CFF4ACC28E2B989DAF23C7EF2B65C8A0BB86F1A5AF212FB5B41E6CEF876F34418329E78A7EEC8679197EB812159C0901EE1A37147A585E2B07EF813A7E69D2538694870559A511FF51CD9A8C7C5171E6316BF1810EB41B1B8E70C96284F35633888783EEB0477A463D824B1283FD3E4A31DB2672B59CBCAD165C722BA558A2E48DE0EF234EE5AA8F40608958B283D1218A77EE1D027E415DF46148122040626A53845DB339EA4401743C78951A63EF30CEE06544D778EDBE5A8F5E7143C5DF9F16014C58D108CFA25E2087C144E9224818305C8C4BB484F1012AE990053F270C075AB943C0155280492B211018A7A7F0D98CC4E719FB8489B2284E220DBAFD5CB1381DDE4161676BB4E2FFAC1BC46E974A4FF882873C2CD5EF3545001C66E9CA3FA3C5C475266A46EC77927B92CDB5A7AA7809482044EEC6ED72A2FE7296192670D04D590158B251053A4AA43B1B496A0BF74368E1AB343616296F0F5B2BAF0075DA13D9678AF4E4C1B4A1692FF47DF6C8EC41F26F465E1DB4C7E5F7AA8E6032FAF8051FE4AC478C1FACECA2568C12B1D184CFAC9B24A9E2F1A4A4765943258D3E41C0372DA6FD3B33DEEDD555D94248DE1B5EC950E69BC9969A226F47C623ACB52F836D702C20612F02A22BD1D8EA0C5F319EFE5F8E7DBF552F58F1034D43BDB05DF8A7D3CB99AAAB1F460B0164D08772E28CB380555470EBB7E70038ECACC672A3FE857CDAB4AA8EB3734DEAABD5977ECA7A4925C08DFA73BC39925E43922B241D4357B7F7F0152D4295AC60F606349E017D83922EA837CF15E9E03047B91BC07E95A1E84AE6A07118400C66EE0F2D38C7AFCA5F59E0A82AC4337D2B34020270BE1CEA21AFAF371E322D5668882601884554010FC7655EE0D595453D02AD9E86B9A155343F5A14275FC4C790F2BFF850248ED9CA409D62E39DE73E4F941DBD2E59A4037E922D3042C2B9478C466BDD57D58B5D7659663F5736B0ED1A48476ECBE9F6FAA79FDA699A0FE9FC0049FA5687A7041321ED5B32CA0E65E6F5FC4C2D7CA9BFEF18B215841CD86D84847C8C399DC15D0391C13EFB42BCF9AE33B06C64390C17A103D929293F09F26E985EA27E27E91FE943E857268F77B7CFC4BD988938299E93D4A746D7A34E035E228E700A4E301335918251CB44F379330A7A3B129E3A8B2EC8357056D59AE24BA8998551A360B88168E861BF1B1BD170AEE0CE7EE2E9CFAE0938CF0F984CC93A274D505D1A0AE6FC9BD34696FA78AEBBF69CA6302F5420DED747E70718DD85DD590454F7C74D14A106BDFB5EFFFD5D1BF1F1793F8426761F72A2834F35E2C792BD936C2CE5101AEA8C96954468C58BF60041E3577E3CC5FAAEFA97255D26E4754750255DFA6FAF2D6E9C8B3B29BB3B16D9607B74AD9D6B8CECB509E0866F27588D7A063A57516C90E85FA660EA38105A7ED24F1B6840568D070AFEDD2B1684C6DCD7E77984BA117AFEE97AC12C0A40769CE76E44A29C8BD723ABC05914B4731740B7F33DB1B369F63D251C6AA74796C67225896CF11D64A469C30B5D3B48143AFD3981DC5A6A6628AB755AF1A65EBF7652F6A942B44ED1A6560CC4CCBB545703F7F8434BA88138AD553F998CF4BF4BE784E20BACBCC4F4C69A9E2A66112A3DD5203623ED9845C12C61BAF7B50A39DBF55B2B5D0BF071945CDC7105643F1775982D82400F426E217801735CFE52E59FFCDE307FD5D9BAD6F551F3EE462B8D68FC54D08DE280F76118E35C7A59F456A4F2C082B3B2DA8957872ED01122FC05628F74F5D7279C011681F8A32FF89A827D20877B6F1614481EEE509298CB94822EEF73AD5F251DCFE0F7F44577E049B91828C3F2D5E59A5B2237F33F92FEC98CEA4520CF2BF0853A533E9FA6E1D7B95D85FC5D6F1289321E23FAC879F86D1F39EF0B956A2624D0D6A0312FBC1272898328AB6A1B00159332C9EB212DE5DB76A49FC8F531962331D9624B4ACAC66C789C340D8397A8A5394B1837B9F71CD189B424CAE7438219EE75FEA72EB07549F127DE774E54D6F280C3EFF2801BB44EB82D448FB001AF2B95C94B8EBCDBDCB37583122E0CF4224826BA31DB309BC13934FFD25A27AD2116A5BD35BDAF5C3BCA37C37B29EFB8074A16E7CAC4792BA299B40679B9422C163F832892EB14EFBE144C7E77A84ED88B8A3ED60C9AB4EE240A7B63455BB5893FC41BBA28CC55C75377BA2817BA3A4C517546170BBF4CE38AAE1D627668966F252BD264C4D601D5833AF762110F83359013833522A218F745215A67184570E214F4A2B434968B068554E4FFED72C3FBBB1F8BD5B59A415A6C057031B5021F5D5BEAE31B27E9D6D418597CBB029AF704997505BEB66495DA95B9C4F70D7400DE65772F712AC12ABB9227EFE262497AC8A821BB10DE2BFB29EB74C5A9F13E76FCAB13AD551A4A2741538F604698587D795AA64D43786F739CBE77082DA44A700EC17B083793059BAD48A5373B74BC23688D3B370B9DA1D04416C8C8560427442C7D76932DEAA662CEBFF7E3272C8DA1CA05EE9FFCB1AE8C3F68C1F29DBBB9EBAB1E6A16B7C50E221723895704B6980B1F5165D820B8578A5B30D8B35FB3E38C282B266BDCDB5C4864C4754BBF5E70EE498F073D613ECF56164CF591FA9927038FC73B8DF7EF296058EFAE30E075646458862E9F2387FCAA545AB46EFBB2736586469A5198D1E761C9ACD490FBE2A3852297E7AE2395E3FC731EFE30596EFCBC4F0CBE357167A43DAC759A97A37C42F89B8FBB5B81FD070CB9281CCE90088F56B84B6F97A07E795BCAEDB45C2EEB507453188C283E4CB1BC591248B2E4956B23DABC09292AE08D58E17E8FA9C438A0B9B9A7622CEB922317FDD14051092263ABC9D22AEF92E4564D2F4F96D9A6D25361D7C6892D27896D603F3CDA7234E20342D3AC6397713A29D557605037E9E4E7DFA5485E2FD18C64DA292E5AEFDDEC804E271F1F5E045F3905B6E217093DD8930B2F03FAB3B7EA611F74D9E2CF437AC894C48CCC28BBF20EC9BAC8D277B89F30FBF18FC5019AD5E6F2875053A7D14929B6698D93738D45375FD5AF6CF9474783429031C4546C1E5C3B63CB6D2FA05B86F08AF8337D720B495189446DC7F43A8DDABE58B341F3B622129898F08FE565FA8C7B7547EB818C4E25A9FE249EDCB3AC10F467FB4B8486E6AB00ED440317442C635586B93AB19E5FDF1A9795898B4EC01402377BB4E898B6EE664318435366975AA3B1CC3F23F97B4A918F975517062EB321EB3853B1630EE03064BA9AB05F479F750B25B27B07248182DAC488869F928B47E8692F4AFE448FAC85C4F2B3C9CFD4D27B25A774F44107DE8AF164AEF4DF4B8B581A2FB204C70C4B50F81C7E3D7F04F55DF4D0F52C52C4FAC197FD945AE61875CA0A9A4C0476D9E8D5B8DCC1991F805787D76313C5B6923C8D6C4F7EE4FE8A5F4D8816A73028648ECF1930B9E8353A6CB3D0DBBB4BA92D4396BE7959BA37F7133E23ABF35D9915E2B690AA5C9E1C57E505EEB612BF4D37D0645942AA46E45515EE0816706C66BE79DEF001E78427D75D812013CB3777E971A2B87ECF1CE20B06937A6CA39D3040229A49F6C7808EED60985FC86E40ADCAA542433C6404AED8CA8551F97EA4C69BD49925D9350CF5EA700234FC818F1F574A0BB61B40722388BFDB2A13128EB1E0C831A1EC558B65DA07A24C607642224790FF7C8439B213A62CC2BD0CF1A60FDCA20705B6B8F04C43678222A725E10C5665640980962F4BBBEDCEA20BE04DE26D61F089E9F9AB055D7ABC1F475BF0FF042672359053D690831D065908B503F4CD9576CAACDBFB7B0FB6B1F28969FADD52C3614EE47A76D73BA8DE1E6016DCDD5EB1131FCC97BD028CD97E3109913FB7DF6C7A9DAE519F6FF10DFFAA19CF572FF2B2EC2298551E7BA4D6E3D462549597538DB6A1ADD98A2BA0CCCFC89E4F1D7C9C152FFEB704D7BB113630857C92F6BB6BC84476343737EBC5F4B1BCB596FB66779AABE6AD211D3731183832CD1ADF4C7FD2491B9DAF85197416B814EC9D7CB97106B977AD0F3FF45FA52199441B6E01EF6F8CF5451623355B7952CE796655FC68C8BBCF0B4FC7CEBF2E2DB5E3AD27319230691F4872B2A1761C1014F2B805A6952ED881D19C3BEF55F62361D430517D99CE239A8DEAC7C24A8F4670CD9932A3A992A144DD54A2C34DA5D87A5CCCF85DBD0F0D568FDB124629CA70184D6A9A8C7FB84C6D334CAE56130A3DE3EEA3F127F50894B7622DAA6FCD12517DDD5017CEB9208B7A68610C2FA880BE753F088ED60B6834697410663B69941CB0B1B44788EFF7DE132589F8CC2635B2788E50C42124A693963C49E0009933DDA9EEE82FA5A8F1121103A3B65BE113938E5CDE5F174FA33F4AFA5B4439DD8897C695B159A931E85033B5AACBF157DE766781B8CF148CEA66B94458D917CDBE1967ADA800250B32C65692B7FB2E9956DA27DD766E57B41A515BC8286C1B302C59C16399F683230BA892BA918535B7AA7FAFF94341C563182BB2DFDFBE44FB4DF81A0C2160D6104592E60133E26F0373C768CAD51339030EFAD1BFBCDA79CBBA5EC6D2EDD6FFCAB33D90174363F1EABFE2DCCBA398ADA29649046F178D66B5F4E2C59870229F2570A8825FDD26223E79006A861716A909B661ABF7CD886C2B66581AFA6784F24FFA19605ED0F85F757F25609C2C5CFFEF76A6B01D19576CEFD173D85BDA53112A8593E2948E5E6010182DBF05099B16ED79CFCA0E894CFB9433A9F45BFDD8AC859EBC0421915F91A199A3F7ED6F2F866B892ECB291744B733A26397767F51F78F74DF4AE43EA3BD177B066A04836E89E283CAF924F08AD7E85C886BBB45FE85DA16B320E465D0EB015B8710E56264567D74D50AC02B41C5B55DD4D844E08DE01E4B2812A58AC5288FCB102C507D199DD33BD8E7DA7FFFDDE1B20230C7138A5FD7981E71A35469C71ED0F8EB9BB802E4F57EF06253BC432F69DCC408F73F7393577E07A5B908E9F2BB7131642742E0EC025ADB29A6568BC1B5EF8176C6F08D4BDF172DDF1A51B150201C941BB5AED606B475FEDC8D5320162B815C7BB79B0F4E50AC58E50BFA5978A6AB9264FD90356C146A00CC4AD5C186D081C3358451178EA93AFD92007C68A7FAA74461C33A047880C1F7CFF69C749753C5BCC4149133D68BA0133BCB70603A036CB01A4F8824E0897C0E0FA6832E75C731B7F4033F819ED19984D571347B867A56AD01B7D133245FDAE78AA04A61D7B939759724B1FBB8844722D51B5280AA949C268A8277EF4A661175C2E64975A590356ADE545FCA66D2670CD54E9920A310FC20B97187BCBFF1D90683C20E5822BDCE5F896B209670B33D0D66D8E3F1FA3EF6331A298C43E5D3AC1A063127DF68E488C857402D165684A2C2143C5B36CC5F938F97077B234D1A2C0AB2A3419498D738E901EDABEF6D75CAA8496B597EB566A02FB392807BC007860E99847A9C03F2A0B08F44E9212562EC16B90A91B2474BDE11CA3E3BF7E79D6402E1BFB26E11DAC4BF70E5A4AC668503A48F8A639384D1BC9251D3B9701B6E3352977E5A88FBBB7560D65637026BE590B30ECCCFD183A4D0D11899314815033987D18CDFD78C1FFD45AB4BA08D3EF8B8776C7E7B8468651616A313D5C7A1BA6A3AD4EDE121425BD4C86E9C0B271D1E239D07F8791D0290A2BACFA4B1D4C4B195912B45E45DABF177AFF767773686117F8B0E933C7DE77BE76F444D5DEDEF1556051887233BE753D0FB4876AFA8727C3654B0D06B159F11A4540FE2AB937F3C0EF807C321AE8EA9EE974FC735812886E8BCE479D11815210515AA26063F5B0C9749FF2F895283BBD24EA1D994D8AE094ED5621ED8CCC7469878548D6735F028723F149605DA686587E0D5F525948C1FC1A84B391B706E12F49354BCB921D2387A87DA3E40CDA66FED5AFE080D1BC093FDA66DA8BA9A43294B4CB93D62B33960675CB2909761007D3D1011215BF39BEB51E4734C73278D0220E2DDCF83E14D8AA66D606330CA1071E3F9710A2CC273EDA63BB832C76A7F1018F68A9A8C3C4A526542E641E4B08B28A6219D345631A8AA711667536680C990F1A8D4F93C634F664EFBD5AF4A0C761D132BA37526E1843D0644D462813811B5E44481C1DD0B5131E223C90E09C95AB760AE7330312EEF040EDA6BE845B0480B79B6041CA432F17F1FB300DD6B2EF1A14FBF9CFD61DE07616E7BAAC5F83434BD71ADA3B094FD885C2F152E9B86FD36D5AC04BF4ED5F7E2724DBC520D9C2F40FC8AF680A5FC46CC3F5E992DAF5149732C6D7DF23938BFBC360B1DD4018BFAF2202B88C32660E6991F09EC871304713B3ED219B06B2AA0A265812335730312615C83F32EAEA2551262515626142DCDD6A1DE1C4E760ECBEE19AFF273F6EAA4A18DADE9A4D6C150CEDE327E0C2E1273F0E80A41B43EDD1BF8A79053C6695A35617C2504AC24A06805B3C0E3E7BFC161BFE32E31DB3FFABB50117BA9E86ED8E01E33BDDFC5C384CD0E6A621E022DDDC0BCDF893528FA1DC9F0CD386AD1DB50342C53D6F73511ECA93FAE237C2CA8BFDB9F33FF09B37154C13432059EDCF6D55022C35E4F5E387B0533F20C02342F6F819FD5108762467BC89084F1DA1FCB8371A3D31AFD89466C3C572E8B2AEA87899296B891029317F4E53ABAA7E90DE2E36806C9AC213BD61914A47DAACA2BA74666931E6CF2FF171399E54789AB6F269BA5F077817C65D6503ABA4D922848C72BD38AF75190309658F48B0FD5BE668D1BDFFD19722D85A3827C5478374FB6262DB07555379F241BE741724C37097406194C2E201E8CC01F032B82AABF25577AF565CEC5B3EB24D8C59863A30B7D7ABAFA3F22B16C014965C1452AC92A3A99B8F6A93F4B3746370D6206931B38DE023B29613536CC15A66F4E4B1C3CFB94E629A61A204AC1C66C25AC180BFE4C7260BB8AD9494775569294E3A5186F21443BB881379D6CC11F16DB5B7BAA76BA787ACA68109BDEF99A390ABCCEDF7EC342B04100F725AAB3288AF23541F44C42AF5BCC596D8B7DCF8E2A9063AF1C2883266275A94FC512B4081E913717ADB71836195C73B648DFA3C96E0A3A9779817B9819A0D969C962340088E619E3AB37431C6AB2E076856D1CF54C977D8C42FA8D5FA0660E81493CE5D5F64746EF2C88540DD22D6D2FF7C39CFC37AF719A4559519434C763C54295D5C7041EBAF1F9CD5D7BB2F7EF9D920E47C7E44F99A5870605135672291E7DDAEF29E5C509D717B0C7F78A4B018B93DFD5D3D503D3726CDBA5F80F74F5304D15E20ABB8B219F1E73A77D5B365AF82C3F2710438F90B8518B5F3E5BA6AF054717832DE8A46D1070FBC0149699D010AF13B5F08461CFB3BEB960E1E7E303FD0BFC98A014141B17658266DFC1BD9BA35D0E6BA5029E69CB0E7D1C566D05D472F5524D6A64AACB82E54AABA7E77038819E87BD4D5E5791002B7B1B18B4300512ABFC8E1407CD8068EB6EC7D8AADD4AEF80130793CD97125A646211507DFE341B10A225326B4DB155335FD614899F70547BE505BF1052CCB88BE3B8B49A21B8EEE4BE7C0EC3A5FD2892D953D543E1430EB3825AA759E40D0CB792BFB522B66110764343D9BCDC4DEDA64E89314827AAC0D44661031F7162D21B2C2296CA18C7FB730C08F48F0FF9731DE30415B9A157614963EA2E1A86CA24347A900375ABE30DB27DB1B209567F1F2DFF2A0B5AFED9CC3D961FBF50B309BA1BCA0EA329B90CF1B1C6BEF2E8DE87B9A97D228282BB877FEB5F6BDC6281A8C29C6DEC865F19CF12A3BE525B8EAF505C106F51F56B158E822AAB2C82FDEE593A22AC1CAD7396131A32589A5009CCBFBC40BCBB18FDE6959252536B8B6C6FED7051FA506064AEAD672D24684C9090C6A7463221C28230FD573A9698384FBE056BDD676BD1BBCC9E9FA264141F36F70F5D439FA44844750212884EA0FB946A9F65ED53D9DF65DE2F38C2D811E43C7B7393C983520169ECBA992D5B78C4FD7E538CAC747E7A6F01C2836FB7EB190BA39B24F57B803829D09376DB51D22D66E16948BD145FE385C6445EC553303BA59144252855E38CF2175ABA23F1A7FBBDB64B3D916ACC656C046633F52607E8879A493A2739FE1940DF1D1740398BD9EB53A9D6A2561F2284F8349BBFE2D2983BB9A3FC904A23F16C8B5AD654C6945C3527253EEAE1CEC8CF1B592E948CC7D11A21BFC185785F09C10640EEE3D0DD547AE65C36AB035BF35C90315A035C386470FC099CDC8643B4A4307549B56B0977E24871C807288E7D1E0396AFC8A7DCF3ABB6296DACEA511B1F4E5C3D1DAD7E79801F56450EE3D865DCAA2488E51D3A042A34ADC7DCFF68FB2B45B4A386F0A22E71108D8A899C71AA64AC2C7FC8F97D2A6A18E9F9BED15BC0557C0429ECE6A2ECB85ECC9F93FBF1073AE2D24E9CAC03C92D5DC150D5463535DCC10868493089ED7FD992BBAA01461FE45C000574C541AD17296B006E331304E538609F9362F06541FACB755E1B14F6C0B12787303EE63A1AFB980E8CB532DD9F755C4860ECADB5691780593B64278ED832CF3BF0547F7CFD4E94F4A1114CBEB4864B569A2AC8EE895E78CE9AC6E49AE1994976E586374B8CB8C482CADEE944B6722021923A57BE09312090C5039A9D5E5DC24E2B43E69CF5DAB78FD1B9913D4E3DE991E5A013F7DBDBBD5FA5088367690722D2DB5B06B188046D1E1E7B6DAE926B16E1C505670FAD2C26318CE0ACD6810223738003CACFC93F9909E231739896D751A6EA89663FA187FEC241298508A5C5CB38872760BC42D7617CE4882BECFA9CE7E9AF5C909B34833F33845FD48525FD741DD332E7B7E6465CAFE58151A23D81E11E7DC7F7B046D714F7E9BBC081E7200E4F7EBFFB08E2F10C561F7184FD2100713FE74446CB6D490FD62CBE52C15CC4B79DF19E34E18B8EFCAF35305B8149BAF9AFD8B8045EFA6B0E362C3A1DDC321F76DD645D2B93176507B91057964F78052D04BB69B0669E6D1CF9E06291AC32FC34965FD8F68A9E7FEF43AB6A937F08BB0421265703EBEBFAE30EC11CEDCB6CE2E23419EBFE4B63571250E2366A8D490CD2766FAE1E3B44EFA69355E2A562F48B253C8400B3D65EE9A9ADB230DDC5DFB636F8603552BE7C46304662714689DDBBAC06D58A1460D4CD7462366AEB8AEFF5CE6C6D778BA023B4192642308B4FD0F9E8060AFF4DD4136FE15137B5237EA827CBC69CBFB0EB5BAA3F05A89BB411412B5A88D55713B969F131BFCC7A1CAA02709ED836A6542DC2C932146866D526E3DC0BC87A9C6A10AFC5DE790BE12672A150916878BC586FAC2A0C98B1D95C781A86EB050FF3B34614A270B030BD18D4A58D04FA80BE34A429DE8BD4C2C2407EEB1265136352C9DD732886C6377B2F362C46AB1D2035C41CE1E0DB5DADA7C49954FDD64C3DC8CFF4BB149074D773D77357EB2C7B299C5294B95D842AE38808FE85B4A83D6E3D69FD294F78B333FB33223372DD9A275399AA5C0C041E86F920FA86DE4755715BA5CFBA0B931F5B546AFB2002E686857F17C652FF7BB82F42287035E94828F409D9CCC453583D3340DDFD8B6756098F801BEB058E35EE6309F1FC8F8DE41481B53127846C7EC2BED431A9110DA0DD3901C4B6B8DDC9A923F419C4FAA3343ADEBB45FFE34F5F8E187BDD5C892439C05F07F0822C3A6B8F21DFA9AE5FAE7816717518670D61BAE936BC1CAAB066B039A2F9A5FD385C38137A9BFC64B619828E7885F2CD0B2394F71823E4B3BA0578FD42DF331C19CA862B35F859E4E803B1B8051B04691188F413A3F21FCB12100F55FF4098FC58319F4577D2B79557B9C36CCEA7997A6FC076DA89AC338C82084C94D2B1280D14EB5EC80B24A8DE070222B3AA65A9727FB89DEDB4DA7706C5624EDC8F2535546CE5FABDB19A3127C9855DC631B7F12FBE8634567537FCDD572C5467BEA951DC6BEBCCDB8C12F12E82BB1B901A71721835FD62AF9F87A5F3A4C685DD5001739FA842792CF3EB1A940CE13030862C80D0141553FF99C5A03F0BE31BBA48611C6406866703FED8DA8BCA8EF66CC768DD45C3E9111DD5225666CB9FF8B83F93840C6EF40C8B049338747DEBA1830DFAC8774B159EB632A751BC950FBB2A00B01245B65A887FFBDAA34BD9BF1C9ACE6BAAE738387D0BD2A97F2ACBC9A68C74C49B89F370149BE933F946BACE22969A4305D7F78E6650BD0DB5B3E8138EB3E89CC1AC72270C7CE53850B4958A5DA7A8644BCA00B7ACE651C61F810EDE25046F91731F84EF92E4CA2B2F3E4E24E6642F45151690606E3D5E3083D9FC13EAFBB14731669A5D943AFCAA4B91940394A01618B9F406D73AACBFD48EA49AE97659E195EBD45728B0C0D47A30D0377E46D3B4BBB4CD9B65E7209FEF17382729AC3C0929360C94F7D8912BD429087B14A1F8C67E748F0F544C2C2ADD1CAB3B64C9D0B8B6E3F28DBF407651C8DA47BB5739FDEB8DAE9AC30213BCEAAD3CDD592F27328F09FAE8E5DCE6A15CBCE15D04D1CD99492DE65D7501D0DECDDED2A55C72E183234EDF86E4D158CEE19C3B41F0EE78D7530DFB6B503CFE3F26B38DEB08BE0F7433F667D82A863A77D626BD4F832AF4FCA2B1DFF540C5396CE11DED76A39CE88F57F0F14B81851FBCFFB0E493648E575D461B8522CA86B6C48EA4B3418C435D29246C2A56D3509EE93204180799A033ACDE924B9D51731B11F9B91817D777E3BAF134C85E0E9547454FCAC66D1622AF14E9806370690390B8B417099DCF5D5216909724323D0249D3C3DC00829144DF280790E3120F63977AE252CBB94AB9000D4BB6A7AD5BA703C42196B97D238791A9AEEF7D56E050E8B319BB413A94B474CF5E40103BB3A5119D6388A75D21A9C23189238CA7EA141A26B17F6527D7C5534F9FDFE8F7B877AB5BA1184F54E15B0CD2591EEB98B077C4DF62567E7E6917A23FE94945C3BE85C17164F6E1C21EB0F25CC2BC96CDB89D1056FE5A2BEDBE0772F7F29E06DE81144D8EB35973FF3014A1682A16AC4F7ECBC5C2467C525B7531F0054F1794ED2D29E477B4D4F4B22436DE03BAF89319B298DACB600D23DD8DD940F603D41DB4CCDD510AE363B7C2CB3E68965D0B4581228D75845E8040AC11F6F12AD244E57D2719A6D4CA03BEF05558A7CA52384AD647842354ACCD7732FFDD496A5BD2E9C59E352C365C457C36DF69D1835071AC06B666C2A868C08263BFA17EA4908D6CF99F4AC8A9905CA608D22BDC3B90DCD3E0DFBBD06B55BC410E7C673B42E9A1A5F1268AF057548E06CB9DDF402CF534E8142BC9C254E2937EE4884740C0B7FF5B54C47CA9FF59D9EF8206B6F388869F44ED96F777D3CEE5683C13DE6364AB8EA021436456891C65FB81CEFF192951948B644895243D33CA6C3F6A4C14E19EF205323282FB7D3E82A7B0BC7892BFE7A9A69EB99ADAED603DA891D8760AD554DA4AA3E1509B9C3CC6E76C779C6129484E25F1A0328F09E088E26947709E9ABFD01E3F0C5781F9ACC2DDE43387BCFAA23B258DC82C687C8C1FF798E0816034976722CCD0712A795F750EDD11F9FB26ACF50E60DB4AEA5E25AD499412D786E136565B4A1FC24347E60E24222B5F7571B1E741C3CA99DA60CBFA832AB1046D3E26CC6E69B9E508729E3421B4BD2C4D256DFF5B12399A82A0C27C5CA947306477EB01E7A00C832E2FDBEECCDE6E052A8C0EFEA98F1A2946BB735C30CA88213FF0205589A37385A7CA8A157C34A3214451F2CFCE2724993190ED39E773D5110EC3EF77DB80CC0EDBB67BAA28FB22590B2C935635A59C7F85A0AB46E17ABE0370C08AA3166B511443AD1F78BB6880FF3EECE5286757C4A3BC39764B51560B86EB8F071BBA254C0A56CEE6F55D6545780C310B06A6F602876950CEB3D8DD76B6BBFA5FF67A6F3AE81BE5420CD16208E055FA31C7AD37555740F23E515E0C9AD12253FA7B87F9D2FD2AF20DAC6D602A41436ADF2F2AC13E81394F3CD258C1F368A15AA429AE90760D664A1055015069995BB6979FF22611FCED3ADD54CA5D45B20A7E31958711CD90FD906E51222597398E4967280E48F132E3CDF4BD6B4C5134F2A132EC35505DB42FC2A32E475";
            var EncryptionKey = new byte[textOfKey.Length / 2];
            for (int i = 0; i < textOfKey.Length / 2; i++)
            {
                EncryptionKey[i] = byte.Parse(textOfKey.Substring(i * 2, 2), NumberStyles.HexNumber);
            }

            var FileSystem = new FrostySdk.FileSystem(@"E:\Origin Games\FIFA 20");
            FileSystem.LoadInitfs(EncryptionKey);
        }

        [TestMethod]
        public void TestBuildCacheAndSDK_FIFA20()
        {
            var buildCache = new BuildCache();
            //buildCache.LoadData("FIFA18", @"H:\Origin Games\FIFA 18");
            buildCache.LoadData("FIFA20", @"E:\Origin Games\FIFA 20", this, false);
            //buildCache.LoadData("MADDEN21", @"E:\Origin Games\Madden NFL 21");
            //buildCache.LoadData("FIFA20_demo", @"H:\Origin Games\FIFA 20 DEMO", this);

            //var buildSDK = new BuildSDK();
            //var b = buildSDK.Build().Result;
            //Assert.IsTrue(b);
        }

        

        [TestMethod]
        public void TestBuildCacheAndSDK_FIFA21()
        {
            var buildCache = new BuildCache();
            buildCache.LoadData("FIFA21", @"E:\Origin Games\FIFA 21", this, false);
        }

        [TestMethod]
        public void TestBuildCacheAndSDK_MADDEN21()
        {
            var buildCache = new BuildCache();
            //buildCache.LoadData("FIFA18", @"H:\Origin Games\FIFA 18");
            //buildCache.LoadData("FIFA20", @"E:\Origin Games\FIFA 20");
            buildCache.LoadData("MADDEN21", @"E:\Origin Games\Madden NFL 21", loadSDK: true);
            //buildCache.LoadData("FIFA20_demo", @"H:\Origin Games\FIFA 20 DEMO", this);

            //var buildSDK = new BuildSDK();
            //var b = buildSDK.Build().Result;
            //Assert.IsTrue(b);
        }

        [TestMethod]
        public void TestBuildSDK_MADDEN21()
        {
            var buildCache = new BuildCache();
            buildCache.LoadData("MADDEN21", @"E:\Origin Games\Madden NFL 21", null, false);

            var buildSDK = new BuildSDK();
            var b = buildSDK.Build().Result;
            Assert.IsTrue(b);
        }


        [TestMethod]
        public void TestBuildCache()
        {
            var buildCache = new BuildCache();
            buildCache.LoadData("FIFA20_demo", @"H:\Origin Games\FIFA 20 DEMO", this);
        }

        //[TestMethod]
        //public void TestBuildSDK()
        //{
        //    var buildSDK = new BuildSDK();
        //    var b = buildSDK.Build().Result;
        //    Assert.IsTrue(b);
        //}

        [TestMethod]
        public void TestUnpackAndRepackInitfs()
        {
            if (ProfilesLibrary.Initialize("FIFA20"))
            {
                byte[] array;

                //array = NativeReader.ReadInStream(new FileStream(ProfilesLibrary.CacheName + ".key", FileMode.Open, FileAccess.Read));
                // change this so it reads the easy version of the key
                // 0B0E04030409080C010708010E0B0B02﻿
                array = NativeReader.ReadInStream(new FileStream("fifa20.key", FileMode.Open, FileAccess.Read));
                byte[] array2 = new byte[16];
                Array.Copy(array, array2, 16);
                KeyManager.Instance.AddKey("Key1", array2);
                if (array.Length > 16)
                {
                    array2 = new byte[16];
                    Array.Copy(array, 16, array2, 0, 16);
                    KeyManager.Instance.AddKey("Key2", array2);
                    array2 = new byte[16384];
                    Array.Copy(array, 32, array2, 0, 16384);
                    KeyManager.Instance.AddKey("Key3", array2);
                }

                if (TypeLibrary.Initialize(false))
                {
                    AssetManagerImportResult result = new AssetManagerImportResult();

                    ClassesSdkCreator.FileSystem = new FileSystem(@"E:\Origin Games\FIFA 20");
                    foreach (FileSystemSource source in ProfilesLibrary.Sources)
                    {
                        ClassesSdkCreator.FileSystem.AddSource(source.Path, source.SubDirs);
                    }
                    byte[] key = KeyManager.Instance.GetKey("Key1");
                    var dbo = ClassesSdkCreator.FileSystem.LoadInitfs(key);
                    ClassesSdkCreator.FileSystem.RepackInitfs(dbo);
                    //ClassesSdkCreator.FileSystem.Initialize(key);








                }
            }
        }

        [TestMethod]
        public void DumpAllFrostyProfiles()
        {
            ProfilesLibrary.DumpAllFrostyProfiles();
        }

		[TestMethod]
		public void DumpFIFA18FrostyProfile()
		{
            ProfilesLibrary.DumpFrostyProfile("FIFA19");
		}

        [TestMethod]
        public void DumpMadden20FrostyProfile()
        {
            ProfilesLibrary.DumpFrostyProfile("MADDEN20");

        }

        public int? getProcIDFromName(string name) //new 1.0.2 function
        {
            Process[] processlist = Process.GetProcesses();

            if (name.Contains(".exe"))
                name = name.Replace(".exe", "");

            foreach (Process theprocess in processlist)
            {
                if (theprocess.ProcessName.Equals(name, StringComparison.CurrentCultureIgnoreCase)) //find (name).exe in the process list (use task manager to find the name)
                    return theprocess.Id;
            }

            return null; //if we fail to find it
        }

        [TestMethod]
        public void TestBuildOfSDKDLLFromTempCS()
        {
            var results = new Microsoft.CSharp.CSharpCodeProvider().CompileAssemblyFromFile(new CompilerParameters
            {
                GenerateExecutable = false,
                OutputAssembly = "EBXClasses.dll",
                ReferencedAssemblies =
                {
                    "mscorlib.dll",
                    "FrostySdk.dll"
                },
                CompilerOptions = "-define:DV_" + ProfilesLibrary.DataVersion
            }, "temp.cs");

            Debug.WriteLine("All errors");
            foreach (var i in results.Errors)
            {
                Debug.WriteLine(i);
            }
            Debug.WriteLine("All output");
            foreach (var i in results.Output)
            {
                Debug.WriteLine(i);
            }
        }

        [TestMethod]
        public void TestSDKGeneratorInjection()
        {
            int? proc = getProcIDFromName("FIFA21");
            //if (!proc.HasValue || proc == 0)
            //{
            //    var r = LaunchFIFA.LaunchAsync(
            //        FIFAInstanceSingleton.FIFARootPath
            //        , ""
            //        , new System.Collections.Generic.List<string>() { }
            //        , this
            //        , FIFAInstanceSingleton.FIFAVERSION
            //        , true).Result;
            //    Thread.Sleep(4000);
            //}


            proc = getProcIDFromName("FIFA21");
            while (!proc.HasValue || proc == 0)
            {
                Debug.WriteLine($"Waiting for FIFA to appear");
                proc = getProcIDFromName("FIFA21");
                Thread.Sleep(1000);
            }
            if (proc.HasValue)
            {
                var dllpath = @"G:\Work\FIFA Modding\SDKGenerator\x64\Debug\Publish\Generator.dll";
                if (File.Exists(dllpath))
                {
                    Debug.WriteLine($"Injecting: {dllpath}");
                    var bl = new Bleak.Injector(Bleak.InjectionMethod.CreateThread, proc.Value, dllpath, false);
                    bl.InjectDll();
                    Debug.WriteLine($"Injected: {dllpath}");
                }
            }
        }

        [TestMethod]
        public void FixGeneratedSDKFile()
        {
            var all_text = File.ReadAllText(@"E:\Origin Games\Madden NFL 21\testexporttocs.cs");

            all_text = all_text.Replace("unsigned __int64", "ulong");
            all_text = all_text.Replace("unsigned __int32", "uint");
            all_text = all_text.Replace("unsigned __int16", "ushort");
            all_text = all_text.Replace("unsigned __int8", "byte");
            all_text = all_text.Replace("__int64", "long");
            all_text = all_text.Replace("__int32", "int");
            all_text = all_text.Replace("__int16", "short");
            all_text = all_text.Replace("__int8", "byte");
            all_text = all_text.Replace("Array<float>", "float[]");
            all_text = all_text.Replace("Array<bool>", "bool[]");
            all_text = all_text.Replace("Array<", "");
            all_text = all_text.Replace(">", "[]");
            all_text = all_text.Replace("*", "");

            File.WriteAllText(@"E:\Origin Games\Madden NFL 21\testexporttocs.cs", all_text);
        }


        public void Log(string text, params object[] vars)
        {
            Debug.WriteLine(text);
        }

        public void LogWarning(string text, params object[] vars)
        {
            Debug.WriteLine("WARNING:" + text);
        }

        public void LogError(string text, params object[] vars)
        {
            Debug.WriteLine("ERROR:" + text);
        }


    }

    [TestClass]
    public class FIFA21 : ILogger
    {
        public void Log(string text, params object[] vars)
        {
            Debug.WriteLine("[LOGGER] [DEBUG] " + text);
        }

        public void LogError(string text, params object[] vars)
        {
        }

        public void LogWarning(string text, params object[] vars)
        {
        }

        [TestMethod]
        public void TestBuildCache()
        {
            var buildCache = new BuildCache();
            //buildCache.LoadData("FIFA21", @"E:\Origin Games\FIFA 21", this, false);
            buildCache.LoadData("FIFA21", @"E:\Origin Games\FIFA 21", this, true);
           

        }

        [TestMethod]
        public void TestBuildSDK()
        {
            var buildCache = new BuildCache();
            buildCache.LoadData("FIFA21", @"E:\Origin Games\FIFA 21", this, false);

            var buildSDK = new BuildSDK();
            buildSDK.Build().Wait();
        }

        [TestMethod]
        public void TestChangeOfSplashscreen()
        {
            ProjectManagement projectManagement = new ProjectManagement(@"E:\Origin Games\FIFA 21\FIFA21.exe");
            var project = projectManagement.StartNewProject();
            var allEBX = project.AssetManager.EnumerateEbx().ToList();
            if (allEBX.Count() > 0)
            {
                var files = allEBX.Where(x => x.Name.Contains("splashscreen"));
                if(files != null)
                {
                    foreach(var f in files)
                    {

                    }
                }
            }

            var allRES = project.AssetManager.EnumerateRes().ToList();
            if (allRES.Count() > 0)
            {
                var files = allRES.Where(x => x.Name.Contains("splashscreen"));
                if (files != null)
                {
                    foreach (var f in files)
                    {

                    }
                }
            }
        }

        [TestMethod]
        public void TestChangeOfKitTexture()
        {
            ProjectManagement projectManagement = new ProjectManagement(@"E:\Origin Games\FIFA 21\FIFA21.exe");
            var project = projectManagement.StartNewProject();
            projectManagement.FrostyProject.Load(@"E:\Origin Games\FIFA 21\kit test project.fbproject");
            
            projectManagement.FrostyProject.Save("Paulv2k4 FIFA 21 Kit Test.fbproject");
            projectManagement.FrostyProject.WriteToMod("Paulv2k4 FIFA 21 Kit Test.fbmod"
                , new ModSettings() { Author = "paulv2k4", Category = "Kits", Description = "Kits", Title = "Kits", Version = "1.00" });

            paulv2k4ModdingExecuter.FrostyModExecutor frostyModExecutor = new paulv2k4ModdingExecuter.FrostyModExecutor();
            //frostyModExecutor.UseSymbolicLinks = true;
            frostyModExecutor.Run(AssetManager.Instance.fs, this, "", "", new System.Collections.Generic.List<string>() { @"Paulv2k4 FIFA 21 Kit Test.fbmod" }.ToArray()).Wait();

        }

        [TestMethod]
        public void TestOpenOfProject()
        {
            ProjectManagement projectManagement = new ProjectManagement(@"E:\Origin Games\FIFA 21\FIFA21.exe");
            var project = projectManagement.StartNewProject();
            var allEBX = project.AssetManager.EnumerateEbx().ToList();
            if (allEBX.Count() > 0)
            {
                var gameplayEBX = allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/")).ToList();
                // Works
                foreach (EbxAssetEntry ebx in gameplayEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_actor/gp_actor_movement_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //File.WriteAllText("testextract.json", JsonConvert.SerializeObject(eb.RootObject));
                        //((dynamic)eb.RootObject).ATTR_DribbleWalkAcceleration = 0f;
                        //((dynamic)eb.RootObject).ATTR_DribbleJogSpeed = 0f;
                        //((dynamic)eb.RootObject).ATTR_JogSpeed = 0f;
                        //((dynamic)eb.RootObject).AnimationPlaybackTimeRatioDribbling = new List<float>() { 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f, 3.0f };
                        //((dynamic)eb.RootObject).ATTR_SprintSpeedTbl = new List<float>() { 0f, 0f };
                        //eb.AddObject(eb.RootObject);
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }
                /*
                // Breaks
                foreach (EbxAssetEntry ebx in gameplayEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_cpuai/gp_cpuai_cpuaimarker_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                    }
                    project.AssetManager.ModifyEbx(ebx.Name, eb);
                }

                foreach (EbxAssetEntry ebx in gameplayEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_goalkeeper/gp_goalkeeper_cpu_difficulty_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }
                /*

                // Works
                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_rules/gp_rules_pushpull_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }
                
                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_cpuai/gp_cpuai_cpuaiballhandler_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_cpuai/gp_cpuai_cpuaistandingtackle_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                       project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_rules/gp_rules_foul_playercontactscore_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //        //        //        ((dynamic)eb.RootObject).PenaltyModifiersCollisionPartCalf = new List<float>() { 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, };
                        //        //        //        ((dynamic)eb.RootObject).PenaltyModifiersCollisionPartFoot = new List<float>() { 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, };
                        //        //        //        ((dynamic)eb.RootObject).PenaltyModifiersCollisionPartThigh = new List<float>() { 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, };
                        //        //        //        ((dynamic)eb.RootObject).PenaltyModifiersCollisionPartHips = new List<float>() { 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, };
                        //        //        //        ((dynamic)eb.RootObject).PenaltyModifiersCollisionPartTorso = new List<float>() { 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, };
                        //        //        //        ((dynamic)eb.RootObject).PenaltyModifiersCollisionPartHead = new List<float>() { 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, };
                        //        //        //        ((dynamic)eb.RootObject).PenaltyWeightsBargeTackle = new List<float>() { 30.0f, 30.0f, 30.0f, 30.0f };

                        //        //        ((dynamic)eb.RootObject).ScoreAdjustmentAutoTackle = 0;
                        //        //        ((dynamic)eb.RootObject).ScoreAdjustmentBallTouchCancelBarge = 0;

                        project.AssetManager.ModifyEbx(ebx.Name, eb);

                    }
                }
                */
                /*
                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_rules/gp_rules_foul_ballcontactscore_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_rules/gp_rules_foul_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {

                        //        //        ((dynamic)eb.RootObject).FOUL_CollisionMinForceDefault[0] = 1.0f;
                        //        //        ((dynamic)eb.RootObject).FOUL_CollisionMinForceDefault[1] = 1.0f;
                        //        //        ((dynamic)eb.RootObject).FOUL_CollisionMinForceDefault[2] = 1.0f;

                        //        //        //        ((dynamic)eb.RootObject).FOUL_CollisionMinForceBallTouchCancelled[0] = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).FOUL_CollisionMinForceBallTouchCancelled[1] = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).FOUL_CollisionMinForceBallTouchCancelled[2] = 1.0f;

                        //        //        //        ((dynamic)eb.RootObject).Foul_BargeTackle_DurationAfterPotentialTackleFound = 120;

                        //        //        //        ((dynamic)eb.RootObject).Foul_TackleExtendTicksForOtherTackle = 15;
                        //        //        //        ((dynamic)eb.RootObject).Foul_TackleExtendTicksForSlide = 15;

                        //        //        //        ((dynamic)eb.RootObject).Foul_PlayerContactScore_Remapping.Internal.Points[0].Y = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).Foul_PlayerContactScore_Remapping.Internal.Points[1].Y = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).Foul_PlayerContactScore_Remapping.Internal.Points[2].Y = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).Foul_PlayerContactScore_Remapping.Internal.Points[3].Y = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).Foul_PlayerContactScore_Remapping.Internal.Points[4].Y = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).Foul_PlayerContactScore_Remapping.Internal.Points[5].Y = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).Foul_PlayerContactScore_Remapping.Internal.Points[6].Y = 1.0f;
                        //        //        //        ((dynamic)eb.RootObject).Foul_PlayerContactScore_Remapping.Internal.Points[7].Y = 1.0f;

                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_rules/gp_rules_refereestrictness_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //((dynamic)eb.RootObject).referee_strictness_yellowcard_threshold = 75.0f;
                        //((dynamic)eb.RootObject).referee_strictness_yellowcard_threshold = 95.0f;
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                //// Works
               

                //// Works
                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_goalkeeper/gp_goalkeeper_newgk_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //        ((dynamic)eb.RootObject).GK_RreachTimeBuffer_InsideBox_Normal.Internal.Points[0].Y = 30.0f;
                        //        ((dynamic)eb.RootObject).GK_RreachTimeBuffer_InsideBox_Normal.Internal.Points[1].Y = 30.0f;

                        //        ((dynamic)eb.RootObject).GK_RreachTimeBuffer_InsideBox_Aggressive.Internal.Points[0].Y = 30.0f;
                        //        ((dynamic)eb.RootObject).GK_RreachTimeBuffer_InsideBox_Aggressive.Internal.Points[1].Y = 30.0f;
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_defense/gp_defense_blockintercept_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_defense/gp_defense_tackling_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }
                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_defense/gp_defense_sealout_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_defense/gp_defense_jockey_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_defense/gp_defense_pushpull_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                //// Works
                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_positioning/gp_positioning_markingtightness_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //((dynamic)eb.RootObject).markingTightnessUniversalModifier = 4.0f;
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                // Works
                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_positioning/gp_positioning_defense_general_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //        //        // Works
                        //        //        ((dynamic)eb.RootObject).backwardMarkingSpeedModifier.Internal.Points[0].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).backwardMarkingSpeedModifier.Internal.Points[1].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).backwardMarkingSpeedModifier.Internal.Points[2].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).backwardMarkingSpeedModifier.Internal.Points[3].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).backwardMarkingSpeedModifier.Internal.Points[4].Y = 1.0f;

                        //        //        //        ((dynamic)eb.RootObject).depthThresholdForTransitionDefense = 0.5f;

                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains(
                    "Fifa/Attribulator/Gameplay/groups/gp_positioning/gp_positioning_defending_attributes_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //        //        ((dynamic)eb.RootObject).minCmfPosFor7ManBehindBall.Internal.Points[0].Y = 0.1f;
                        //        //        ((dynamic)eb.RootObject).minCmfPosFor7ManBehindBall.Internal.Points[1].Y = 0.1f;
                        //        //        ((dynamic)eb.RootObject).minCmfPosFor7ManBehindBall.Internal.Points[2].Y = 0.1f;

                        //        //        ((dynamic)eb.RootObject).coveringEffectiveness.Internal.Points[0].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).coveringEffectiveness.Internal.Points[1].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).coveringEffectiveness.Internal.Points[2].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).coveringEffectiveness.Internal.Points[3].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).coveringEffectiveness.Internal.Points[4].Y = 1.0f;

                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[0].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[1].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[2].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[3].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[4].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[5].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[6].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[7].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[8].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[9].Y = 1.0f;
                        //        //        ((dynamic)eb.RootObject).markingIntelligence.Internal.Points[10].Y = 1.0f;



                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_positioning/gp_positioning_runpathblock_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_positioningformation/gp_positioningformation_fullbacknormposattacking_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //        // Works
                        //        ((dynamic)eb.RootObject).fullback_norm_pos_modifier.Internal.Points[0].Y = 0.1f;
                        //        ((dynamic)eb.RootObject).fullback_norm_pos_modifier.Internal.Points[1].Y = 0.1f;
                        //        ((dynamic)eb.RootObject).fullback_norm_pos_modifier.Internal.Points[2].Y = 0.1f;
                        //        ((dynamic)eb.RootObject).fullback_norm_pos_modifier.Internal.Points[3].Y = 0.1f;
                        //        ((dynamic)eb.RootObject).fullback_norm_pos_modifier.Internal.Points[4].Y = 0.1f;
                        //        ((dynamic)eb.RootObject).fullback_norm_pos_modifier.Internal.Points[5].Y = 0.1f;
                        //        ((dynamic)eb.RootObject).fullback_norm_pos_modifier.Internal.Points[6].Y = 0.1f;
                        //        ((dynamic)eb.RootObject).fullback_norm_pos_modifier.Internal.Points[7].Y = 0.1f;

                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_cpuai/gp_cpuai_shotdecision_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {

                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_kickerror/gp_kickerror_passshotcontexteffectshotdriven_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_Attribute_ReduceRate.Internal.Points[0].Y = 0.1f;
                        //((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_Attribute_ReduceRate.Internal.Points[1].Y = 0.1f;
                        //((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_Attribute_ReduceRate.Internal.Points[2].Y = 0.1f;
                        //((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_Attribute_ReduceRate.Internal.Points[3].Y = 0.1f;

                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_kickerror/gp_kickerror_passshotcontexteffectshotfinesse_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        //        //        ((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_Attribute_ReduceRate.Internal.Points[0].Y = 0.2f;
                        //        //        ((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_Attribute_ReduceRate.Internal.Points[1].Y = 0.2f;
                        //        //        ((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_Attribute_ReduceRate.Internal.Points[2].Y = 0.2f;
                        //        //        ((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_Attribute_ReduceRate.Internal.Points[3].Y = 0.2f;

                        //        //((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_MissRateVsAttribute.Internal.Points[0].Y = 5.0f;
                        //        //((dynamic)eb.RootObject).PASSSHOT_CONTEXTEFFECT_MissRateVsAttribute.Internal.Points[1].Y = 4.0f;
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }
                */
                projectManagement.FrostyProject.Save("Paulv2k4 FIFA 21 Gameplay.fbproject");
                projectManagement.FrostyProject.WriteToMod("Paulv2k4 FIFA 21 Gameplay Mod Pre Alpha 3.fbmod"
                    , new ModSettings() { Author = "paulv2k4", Category = "Gameplay", Description = "Gameplay Test", Title = "Gameplay Test", Version = "1.00" });

                paulv2k4ModdingExecuter.FrostyModExecutor frostyModExecutor = new paulv2k4ModdingExecuter.FrostyModExecutor();
                //frostyModExecutor.UseSymbolicLinks = true;
                //frostyModExecutor.Run(AssetManager.Instance.fs, this, "", "", new System.Collections.Generic.List<string>() { @"Paulv2k4 FIFA 21 Gameplay Mod Pre Alpha 3.fbmod" }.ToArray()).Wait();

            }

            

        }

        [TestMethod]
        public void TestChangeGKEBXObject()
        {
            ProjectManagement projectManagement = new ProjectManagement(@"E:\Origin Games\FIFA 21\FIFA21.exe");
            var project = projectManagement.StartNewProject();
            var allEBX = project.AssetManager.EnumerateEbx().ToList();
            if (allEBX.Count() > 0)
            {

                foreach (EbxAssetEntry ebx in allEBX.Where(
                    x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_goalkeeper/gp_goalkeeper_newgk_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_goalkeeper/gp_goalkeeper_newgk_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                foreach (EbxAssetEntry ebx in allEBX.Where(x => x.Name.Contains("Fifa/Attribulator/Gameplay/groups/gp_goalkeeper/gp_goalkeeper_cpu_difficulty_runtime")))
                {
                    var eb = AssetManager.Instance.GetEbx(ebx);
                    if (eb != null)
                    {
                        project.AssetManager.ModifyEbx(ebx.Name, eb);
                    }
                }

                projectManagement.FrostyProject.Save("Paulv2k4 FIFA 21 Gameplay GK.fbproject");
                projectManagement.FrostyProject.WriteToMod("Paulv2k4 FIFA 21 Gameplay Mod GK Test.fbmod"
                    , new ModSettings() { Author = "paulv2k4", Category = "Gameplay", Description = "Gameplay Test", Title = "Gameplay Test", Version = "1.00" });

                paulv2k4ModdingExecuter.FrostyModExecutor frostyModExecutor = new paulv2k4ModdingExecuter.FrostyModExecutor();
                //frostyModExecutor.UseSymbolicLinks = true;
                frostyModExecutor.Run(AssetManager.Instance.fs, this, "", "", new System.Collections.Generic.List<string>() { @"Paulv2k4 FIFA 21 Gameplay Mod GK Test.fbmod" }.ToArray()).Wait();

            }



        }


        [TestMethod]
        public void TestOpenLegacyFiles()
        {
            ProjectManagement projectManagement = new ProjectManagement(@"E:\Origin Games\FIFA 21\FIFA21.exe");
            var project = projectManagement.StartNewProject();
            var legacyFiles = project.AssetManager.EnumerateCustomAssets("legacy").OrderBy(x => x.Path).ToList();
            if(legacyFiles.Count > 0)
            {

            }
        }

        [TestMethod]
        public void InjectSDKGeneratorIntoFIFA()
        {
            
            int? proc = GameInstanceSingleton.GetProcIDFromName("FIFA21");
            proc = GameInstanceSingleton.GetProcIDFromName("FIFA21");
            while (!proc.HasValue || proc == 0)
            {
                Debug.WriteLine($"Waiting for FIFA to appear");
                proc = GameInstanceSingleton.GetProcIDFromName("FIFA21");
                Thread.Sleep(1000);
            }
            if (proc.HasValue)
            {
                var dllpath = @"G:\Work\FIFA Modding\SDKGenerator\x64\Debug\Publish\Generator.dll";
                if (File.Exists(dllpath))
                {
                    Debug.WriteLine($"Injecting: {dllpath}");
                    var bl = new Bleak.Injector(Bleak.InjectionMethod.CreateThread, proc.Value, dllpath, false);
                    bl.InjectDll();
                    Debug.WriteLine($"Injected: {dllpath}");
                }
            }
        }
    }
}
